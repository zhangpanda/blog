---
layout: post
title: Tabby
category: project
description: 开太多标签？Tabby来帮你管理。
---

安装前需要先更新下系统，不然有些依赖的包会找不到
# run as root
apt-get update -y
apt-get upgrade -y
apt-get install sudo -y
安装Nginx
sudo apt-get install nginx -y
安装完毕后，Nginx的配置文件在/etc/nginx目录下。使用以下命令启动Nginx：
service nginx start

安装MySQL
我们可以使用apt-get直接安装MySQL：
sudo apt-get install mysql-server -y

安装过程中会提示输入两次root密码。
我们可以使用以下命令登录MySQL：
mysql -uroot -p

按提示输入root密码，就会进入MySQL的交互界面，说明已经安装成功。

安装完成后MySQL默认监听127.0.0.1的3306端口，这样只能在本机访问MySQL，如果需要在其他云主机上也访问MySQL，需要在配置文件/etc/mysql/my.cnf中修改bind-address 参数的值，由127.0.0.1修改为该云主机的内网地址：


#bind-address            = 127.0.0.1

bind-address            = 10.128.129.21

内网地址可以从MOS控制台云主机列表中找到。然后重启MySQL服务使配置生效：

sudo service mysql restart

安装PHP

我们可以直接使用apt-get安装PHP：
apt-get install -y php5 php5-fpm php5-cgi php5-cli php5-curl php5-gd php5-dev php5-mysql

这时php-fpm已经安装完毕，但是现在需要配置一下:
vi /etc/php5/fpm/pool.d/www.conf
大概33行的位置找到
listen = /var/run/php5-fpm.sock
改为
listen = 127.0.0.1:9000
修改nginx配置文件
vi /etc/nginx/sites-enabled/default
server {
    listen 80;
    root /data/www;
    index  index.php;
    server_name www.zhangtaifeng.com;
    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include        fastcgi_params;
    }

}

然后执行以下命令使我们的配置生效：
sudo service nginx reload

我们在/data/www目录下新建一个名为index.php的文件用来测试一下PHP跟MySQL是否都正常工作，文件内容为：
vi /data/www/index.php
<?php
$host='127.0.0.1';
$root='root';
$pwd='root';
$con= mysql_connect($host,$root,$pwd);
if (empty($con)) {
    echo 'error';
} else{
    echo 'success';
}
